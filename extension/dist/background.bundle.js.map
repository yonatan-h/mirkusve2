{"version":3,"file":"background.bundle.js","mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://mirkusve2/./src/background/setup.js","webpack://mirkusve2/./src/background/view-request.js","webpack://mirkusve2/./src/keys.js","webpack://mirkusve2/./src/lib/custom-errors.js","webpack://mirkusve2/webpack/bootstrap","webpack://mirkusve2/webpack/runtime/define property getters","webpack://mirkusve2/webpack/runtime/hasOwnProperty shorthand","webpack://mirkusve2/webpack/runtime/make namespace object","webpack://mirkusve2/./src/background/background.js"],"sourcesContent":["import { clientId } from \"../keys.js\";\nimport { CustomError } from \"../lib/custom-errors.js\";\n\nfunction openSetupTab() {\n\tconst url = chrome.runtime.getURL(\"/setup.html\");\n\tchrome.tabs.create({ url });\n}\n\nasync function getRedirectedUrl(name) {\n\tawait chrome.identity.clearAllCachedAuthTokens();\n\tconst authUrl = getAuthURL(name);\n\n\ttry {\n\t\tconst redirectedUrl = await chrome.identity.launchWebAuthFlow({\n\t\t\turl: authUrl,\n\t\t\tinteractive: true,\n\t\t});\n\t\treturn { redirectedUrl };\n\t} catch (error) {\n\t\tconst message = \"You canceled the sign in? Please sign in to github.\";\n\t\tconst customError = new CustomError(message, error.message);\n\t\treturn { error: customError };\n\t}\n}\n\nfunction getAuthURL(name) {\n\tlet authUrl = \"https://github.com/login/oauth/authorize\";\n\tauthUrl += `?client_id=${clientId}`;\n\tauthUrl += `&scope=repo`;\n\tauthUrl += `&login=${name}`;\n\tconsole.log(\"authUrl\", authUrl);\n\treturn authUrl;\n}\n\nexport { openSetupTab, getRedirectedUrl };\n","async function requestViewChange(tabId, url) {\n\tconst viewName = await getViewName(url);\n\tif (!inSlashProblems(url)) return;\n\tchrome.tabs.sendMessage(tabId, {\n\t\tmessage: \"change-view\",\n\t\tviewName,\n\t});\n}\n\nasync function getViewName(link) {\n\tif (matchesQuestionPage(link)) return \"timer\";\n\telse if (matchesSubmissionPage(link)) return \"answer-submit\";\n\telse return undefined;\n}\n\nfunction inSlashProblems(url) {\n\tconst pathNodes = new URL(url).pathname.split(\"/\").filter((x) => x !== \"\");\n\tconst hasProblems = pathNodes[0] === \"problems\";\n\treturn hasProblems;\n}\n\nfunction matchesSubmissionPage(url) {\n\t//example\n\t//https://leetcode.com/problems/two-sum/submissions/54654\n\n\tconst pathNodes = new URL(url).pathname.split(\"/\").filter((x) => x !== \"\");\n\tconst hasProblems = pathNodes[0] === \"problems\";\n\tconst hasSubmissions = pathNodes[pathNodes.length - 2] === \"submissions\";\n\treturn hasProblems && hasSubmissions;\n}\n\nfunction matchesQuestionPage(url) {\n\t//examples\n\t//https://leetcode.com/problems/two-sum/description/\n\t//or\n\t//https://leetcode.com/problems/two-sum/\n\n\tconst pathNodes = new URL(url).pathname.split(\"/\").filter((x) => x !== \"\");\n\tconst hasProblem = pathNodes[0] === \"problems\";\n\tconst hasDescription = pathNodes[pathNodes.length - 1] === \"description\";\n\tconst questionNameOnly = pathNodes.length === 2;\n\n\treturn hasProblem && (hasDescription || questionNameOnly);\n}\n\nexport default requestViewChange;\n","const sheetsWebappUrl =\n\t\"https://script.google.com/macros/s/AKfycbzla4uMy7Dan5631pEB9DA_wrnClhJq9CiRXGjv_MLE9ZwXO7wdgBrgOeIhbYTHa-gUIw/exec\";\n\nconst groupFinderUrl = sheetsWebappUrl + \"?path=groups\";\nconst codeForTokenUrl = sheetsWebappUrl + \"?path=tokens\";\nconst submitAnswerUrl = sheetsWebappUrl + \"?path=answers\";\n\nconst clientId = \"96309949db0f49ae9c72\";\n\nexport { groupFinderUrl, clientId, codeForTokenUrl, submitAnswerUrl };\n","class CustomError extends Error {\n\tconstructor(descriptionAndSolution, errorAsString = \"\") {\n\t\tsuper(`Custom Error: \\n- ${descriptionAndSolution}\\n- ${errorAsString}\\n`);\n\t\tthis.descriptionAndSolution = descriptionAndSolution;\n\t\tthis.errorAsString = errorAsString;\n\t}\n}\n\nclass NetworkError extends CustomError {\n\tconstructor(typeError) {\n\t\tconst { name, message } = typeError;\n\t\tconst errorAsString = JSON.stringify({ name, message });\n\n\t\tsuper(\"Weak connection? Please try again later.\", errorAsString);\n\t}\n}\n\nclass BadStatusError extends CustomError {\n\tconstructor(response) {\n\t\tconst { ok, status, statusText, url } = response;\n\t\tconst errorAsString = JSON.stringify({ ok, status, statusText, url });\n\n\t\tsuper(\n\t\t\t\"Http response not ok. Try avoiding vpn or try again later.\",\n\t\t\terrorAsString\n\t\t);\n\t}\n}\n\nclass BadUrlError extends CustomError {\n\tconstructor(badUrl) {\n\t\tsuper(`${badUrl} is not a valid url`);\n\t}\n}\n\n//because (at least sofar) you cant send status codes in appscript responses\nclass AppScriptError extends CustomError {\n\tconstructor(responseObject) {\n\t\tsuper(`Message from Sheets: ${responseObject.error}`);\n\t}\n}\n\nclass EmptyInputError extends CustomError {\n\tconstructor(inputName) {\n\t\tsuper(`Please fill out '${inputName}'`);\n\t}\n}\n\nexport {\n\tCustomError,\n\tNetworkError,\n\tBadStatusError,\n\tAppScriptError,\n\tEmptyInputError,\n\tBadUrlError,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { openSetupTab, getRedirectedUrl } from \"./setup.js\";\nimport requestViewChange from \"./view-request.js\";\n//All listeners should be exposed, not nested in functions (from the documentation)\n\n\nchrome.runtime.onMessage.addListener((req, sender, next) => {\n\tif (req.message === \"set-up\") openSetupTab();\n});\n\nchrome.runtime.onMessage.addListener((req, sender, next) => {\n\tif (req.message === \"sign-in\") {\n\t\tgetRedirectedUrl(req.userName).then(next);\n\t\treturn true;\n\t}\n});\n\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n\tconst url = tab.url;\n\tif (url && changeInfo.status === \"complete\") {\n\t\trequestViewChange(tabId, url);\n\t}\n});\n\n"],"names":[],"sourceRoot":""}